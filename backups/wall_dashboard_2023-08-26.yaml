views:
  - type: custom:grid-layout
    title: home
    layout:
      grid-template-columns: 30% auto 30%
      grid-template-rows: auto
      grid-template-areas: |
        "header header header"
        ". message ."
        "left middle right"
        "footer footer footer"
    icon: mdi:home
    badges: []
    cards:
      - type: custom:mushroom-chips-card
        chips:
          - type: entity
            entity: input_boolean.guest
            icon: mdi:account-plus
            icon_color: blue
            use_entity_picture: false
            tap_action:
              action: toggle
            content_info: name
            name: Gast
          - type: entity
            entity: input_boolean.home_security
            icon_color: deep-orange
            content_info: name
            tap_action:
              action: toggle
            icon: mdi:shield-lock
            name: Beveiliging
          - type: entity
            entity: input_boolean.sleep_mode
            content_info: name
            icon_color: blue
            tap_action:
              action: toggle
            icon: mdi:sleep
            name: Slaapstand
          - type: entity
            entity: input_boolean.vacation_mode
            name: Vakantiemodus
            content_info: name
            icon: mdi:beach
            icon_color: blue
            use_entity_picture: false
            tap_action:
              action: toggle
          - type: entity
            entity: switch.doorbell_chime_active
            icon_color: blue
            tap_action:
              action: toggle
            content_info: state
            icon: mdi:alarm-bell
          - type: entity
            entity: binary_sensor.doorbell_button
            content_info: last-updated
            icon: mdi:doorbell
            icon_color: blue
          - type: conditional
            conditions:
              - entity: sensor.transmission_active_torrents
                state_not: '0'
            chip:
              type: entity
              entity: sensor.transmission_active_torrents
              double_tap_action:
                action: none
              icon: mdi:download
              icon_color: blue
              use_entity_picture: false
              tap_action:
                action: none
              hold_action:
                action: none
          - type: conditional
            conditions:
              - entity: sensor.lights_on_counter
                state_not: '0'
            chip:
              type: template
              entity: sensor.lights_on_counter
              icon_color: |-
                {% if is_state("sensor.lights_on_counter", "0") %}
                  disabled
                {% else %}
                  orange
                {% endif %}
              icon: |-
                {% if is_state("sensor.lights_on_counter", "0") %}
                  mdi:lightbulb-off
                {% else %}
                  mdi:lightbulb-on
                {% endif %}
              content: '{{ states("sensor.lights_on_counter") }}'
              tap_action:
                action: navigate
                navigation_path: /wall-v2/lights
              hold_action:
                action: none
              double_tap_action:
                action: none
          - type: conditional
            conditions:
              - entity: binary_sensor.stookalert_gelderland
                state: 'on'
            chip:
              type: entity
              entity: binary_sensor.stookalert_gelderland
              double_tap_action:
                action: none
              icon_color: deep-orange
              tap_action:
                action: none
              hold_action:
                action: none
              icon: mdi:fireplace
        alignment: center
        view_layout:
          grid-area: header
      - type: vertical-stack
        cards:
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-template-card
                primary: ''
                secondary: ''
                icon: mdi:lightbulb
                icon_color: orange
                layout: vertical
                fill_container: false
                tap_action:
                  action: navigate
                  navigation_path: /wall-v2/lights
                hold_action:
                  action: none
                double_tap_action:
                  action: none
              - type: custom:mushroom-template-card
                primary: ''
                secondary: ''
                icon: mdi:home-thermometer
                icon_color: green
                layout: vertical
                fill_container: false
                tap_action:
                  action: navigate
                  navigation_path: /wall-v2/climate
                hold_action:
                  action: none
                double_tap_action:
                  action: none
              - type: custom:mushroom-template-card
                primary: ''
                secondary: ''
                icon: mdi:vacuum
                icon_color: purple
                layout: vertical
                fill_container: false
                tap_action:
                  action: navigate
                  navigation_path: /wall-v2/vacuum
                hold_action:
                  action: none
                double_tap_action:
                  action: none
              - type: custom:mushroom-template-card
                primary: ''
                secondary: ''
                icon: mdi:lightning-bolt
                icon_color: yellow
                layout: vertical
                fill_container: false
                tap_action:
                  action: navigate
                  navigation_path: energy
                hold_action:
                  action: none
                double_tap_action:
                  action: none
              - type: custom:mushroom-template-card
                primary: ''
                secondary: ''
                icon: mdi:cog
                icon_color: brown
                layout: vertical
                fill_container: false
                tap_action:
                  action: navigate
                  navigation_path: /wall-v2/system
                hold_action:
                  action: none
                double_tap_action:
                  action: none
          - type: conditional
            conditions:
              - entity: binary_sensor.notification_level_info
                state: 'on'
            card:
              type: custom:mushroom-template-card
              primary: |
                {{ (state_attr(entity, "primary_information")) }}
              secondary: '{{ (state_attr(entity, "secondary_information")) }}'
              icon: |
                {{ (state_attr(entity, "icon")) }}
              entity: binary_sensor.notification_level_info
              icon_color: |
                {{ (state_attr(entity, "icon_color")) }}
              badge_icon: ''
              badge_color: ''
              multiline_secondary: true
              tap_action:
                action: call-service
                service: button.press
                target:
                  entity_id: button.notification_level_info_turn_off
                data: {}
              picture: ''
          - type: conditional
            conditions:
              - entity: binary_sensor.notification_level_warning
                state: 'on'
            card:
              type: custom:mushroom-template-card
              primary: |
                {{ (state_attr(entity, "primary_information")) }}
              secondary: '{{ (state_attr(entity, "secondary_information")) }}'
              icon: |
                {{ (state_attr(entity, "icon")) }}
              entity: binary_sensor.notification_level_warning
              icon_color: |
                {{ (state_attr(entity, "icon_color")) }}
              badge_icon: ''
              badge_color: ''
              multiline_secondary: true
              tap_action:
                action: call-service
                service: button.press
                target:
                  entity_id: button.notification_level_warning_turn_off
                data: {}
              picture: ''
          - type: conditional
            conditions:
              - entity: binary_sensor.notification_level_error
                state: 'on'
            card:
              type: custom:mushroom-template-card
              primary: |
                {{ (state_attr(entity, "primary_information")) }}
              secondary: '{{ (state_attr(entity, "secondary_information")) }}'
              icon: |
                {{ (state_attr(entity, "icon")) }}
              entity: binary_sensor.notification_level_error
              icon_color: |
                {{ (state_attr(entity, "icon_color")) }}
              badge_icon: ''
              badge_color: ''
              multiline_secondary: true
              tap_action:
                action: call-service
                service: button.press
                target:
                  entity_id:
                    - button.notification_level_error_turn_off
                data: {}
              picture: ''
          - type: conditional
            conditions:
              - entity: sensor.notification_on_counter
                state: '0'
            card:
              show_current: true
              show_forecast: true
              type: weather-forecast
              entity: weather.buienradar
              tap_action:
                action: fire-dom-event
                browser_mod:
                  service: browser_mod.popup
                  data:
                    content:
                      type: picture-entity
                      entity: camera.buienradar
                      show_name: false
                      show_state: false
                      tap_action:
                        action: none
              forecast_type: legacy
              secondary_info_attribute: humidity
          - type: conditional
            conditions:
              - entity: sensor.notification_on_counter
                state: '1'
            card:
              show_current: true
              show_forecast: false
              type: weather-forecast
              entity: weather.buienradar
              tap_action:
                action: fire-dom-event
                browser_mod:
                  service: browser_mod.popup
                  data:
                    content:
                      type: picture-entity
                      entity: camera.buienradar
                      show_name: false
                      show_state: false
                      tap_action:
                        action: none
              forecast_type: legacy
              secondary_info_attribute: humidity
          - type: custom:stack-in-card
            mode: vertical
            cards:
              - type: vertical-stack
                cards:
                  - type: custom:mushroom-chips-card
                    alignment: center
                    chips:
                      - type: template
                        entity: sensor.custom_energy
                        icon: |-
                          {% if states(entity)|int > 0 %}
                          mdi:transmission-tower
                          {% else %}
                          mdi:transmission-tower-export
                          {% endif %}
                        icon_color: |-
                          {% if states(entity)|int > 0 %}
                          purple
                          {% else %}
                          blue
                          {% endif %}
                        content: '{{ (states(entity))}} W'
                        card_mod:
                          style: |
                            ha-card {
                              --chip-border-width: 0;
                              --chip-box-shadow: 0px;
                            }
                            ::slotted(span) {
                                 font-size:12px !important;
                               }
                      - type: template
                        entity: sensor.solaredge_modbus_ac_power
                        icon: mdi:solar-power
                        icon_color: |-
                          {% if states(entity)|int > 0 %}
                          orange
                          {% else %}
                          disabled
                          {% endif %}
                        content: '{{ (states(entity, with_unit=True)) }}'
                        card_mod:
                          style: |
                            ha-card {
                              --chip-border-width: 0;
                              --chip-box-shadow: 0px;
                            }
                            ::slotted(span) {
                                 font-size:12px !important;
                               } 
                      - type: template
                        entity: sensor.watermeter_pulse
                        icon: |-
                          {% if states(entity)|int > 0 %}
                          mdi:water
                          {% else %}
                          mdi:water-off
                          {% endif %}
                        icon_color: |-
                          {% if states(entity)|int > 0 %}
                            #00bcd4
                          {% else %}
                            disabled
                          {% endif %}
                        content: '{{ (states(entity, with_unit=True)) }}'
                        card_mod:
                          style: |
                            ha-card {
                              --chip-border-width: 0;
                              --chip-box-shadow: 0px;
                            }
                            ::slotted(span) {
                                 font-size:12px !important;
                               }
                  - type: energy-distribution
                    link_dashboard: false
        view_layout:
          grid-area: middle
      - type: vertical-stack
        cards:
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-light-card
                entity: light.shellydimmer_living_room
                layout: vertical
                primary_info: name
                secondary_info: none
                icon_type: icon
              - type: custom:mushroom-light-card
                entity: light.shellydimmer_kitchen
                layout: vertical
                secondary_info: none
              - type: custom:mushroom-light-card
                entity: light.shellydimmer_dinner_table
                layout: vertical
                secondary_info: none
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-light-card
                entity: light.shellydimmer_backyard_string_l
                layout: vertical
                primary_info: name
                secondary_info: none
                icon_type: icon
              - type: custom:mushroom-light-card
                entity: light.shelly1_front_door
                layout: vertical
                secondary_info: none
              - type: custom:mushroom-light-card
                entity: light.shelly1_upstairs_hall
                layout: vertical
                secondary_info: none
          - type: custom:gap-card
            height: 10
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-entity-card
                entity: switch.shelly1_frontyard_powersocket
                icon: mdi:power-socket-de
                fill_container: false
                secondary_info: none
                name: Voortuin
                icon_color: purple
                tap_action:
                  action: toggle
                layout: vertical
              - type: custom:mushroom-entity-card
                icon: mdi:vacuum
                fill_container: false
                secondary_info: none
                icon_color: purple
                entity: input_boolean.auto_cleaning
                name: Automatisch
                tap_action:
                  action: toggle
                layout: vertical
              - type: custom:mushroom-entity-card
                icon: mdi:file-cabinet
                fill_container: false
                secondary_info: none
                name: Keukenlade's
                icon_color: purple
                entity: switch.childlock_kitchen_switch
                tap_action:
                  action: toggle
                layout: vertical
          - type: custom:gap-card
            height: 10
          - square: false
            type: grid
            columns: 3
            cards:
              - type: custom:mushroom-entity-card
                entity: binary_sensor.washing_machine
                layout: vertical
                fill_container: false
                secondary_info: state
                icon_color: cyan
                name: Wasmachine
              - type: custom:mushroom-entity-card
                entity: binary_sensor.tumble_dryer
                icon: mdi:tumble-dryer
                layout: vertical
                fill_container: false
                secondary_info: state
                icon_color: cyan
                name: Wasdroger
              - type: custom:mushroom-entity-card
                entity: binary_sensor.dishwasher
                icon: mdi:dishwasher
                layout: vertical
                fill_container: false
                secondary_info: state
                icon_color: cyan
                name: Vaatwasser
          - square: false
            type: grid
            columns: 3
            cards:
              - type: custom:mushroom-template-card
                entity: binary_sensor.frontdoor_window_door_is_open
                primary: Voordeur
                secondary: >-
                  {% if is_state(entity, "on") %}Open{% else %}Dicht{% endif %}
                  - {{
                  as_timestamp(states.binary_sensor['frontdoor_window_door_is_open'].last_updated)
                  | as_datetime | as_local | relative_time}} 
                icon: >-
                  {% if is_state(entity, "on") %} mdi:door-open {% else %}
                  mdi:door-closed {% endif %}
                icon_color: >-
                  {% if is_state(entity, "on") %} brown {% else %} disabled {%
                  endif %}
                layout: vertical
              - type: custom:mushroom-template-card
                primary: Achterdeur
                secondary: >-
                  {% if is_state(entity, "on") %}Open{% else %}Dicht{% endif %}
                  - {{
                  as_timestamp(states.binary_sensor['backdoor_window_door_is_open'].last_updated)
                  | as_datetime | as_local | relative_time}} 
                icon: >-
                  {% if is_state(entity, "on") %} mdi:door-open {% else %}
                  mdi:door-closed {% endif %}
                entity: binary_sensor.backdoor_window_door_is_open
                icon_color: >-
                  {% if is_state(entity, "on") %} brown {% else %} disabled {%
                  endif %}
                layout: vertical
        view_layout:
          grid-area: right
      - type: vertical-stack
        cards:
          - type: thermostat
            entity: climate.living_room
            name: Woonkamer
          - type: custom:mushroom-select-card
            entity: input_select.entertainment_activity
            fill_container: false
            icon: mdi:television-play
            secondary_info: last-changed
            layout: horizontal
            icon_color: blue
            icon_type: icon
            double_tap_action:
              action: none
            hold_action:
              action: none
            tap_action:
              action: none
            view_layout:
              grid-area: left
          - type: conditional
            conditions:
              - entity: input_select.entertainment_activity
                state: TV
            card:
              type: vertical-stack
              cards:
                - type: conditional
                  conditions:
                    - entity: media_player.shield
                      state_not: 'off'
                    - entity: media_player.shield
                      state_not: unavailable
                  card:
                    type: custom:stack-in-card
                    mode: vertical
                    cards:
                      - type: custom:mini-media-player
                        entity: media_player.shield
                        name: Nvidia Shield
                        icon: mdi:cast
                        artwork: cover
                        group: false
                        hide:
                          volume: true
                          volume_level: true
                      - type: custom:mini-media-player
                        entity: media_player.powernode_2i_ea48
                        name: Powernode
                        icon: mdi:volume-source
                        source: icon
                        group: true
                        info: short
                        max_volume: 40
                        artwork: none
                        tap_action:
                          action: none
                        hide:
                          name: true
                          source: true
                          icon: true
                          info: true
                          power: true
                          shuffle: true
                          repeat: true
                          runtime: true
                          runtime_remaining: true
                          volume: false
                          volume_level: false
                          jump: true
                          prev: true
                          next: true
                          play_pause: true
          - type: conditional
            conditions:
              - entity: input_select.entertainment_activity
                state: Radio
            card:
              type: vertical-stack
              cards:
                - type: vertical-stack
                  cards:
                    - type: custom:mini-media-player
                      entity: media_player.powernode_2i_ea48
                      name: Bluesound Powernode 2i
                      toggle_power: false
                      volume_stateless: false
                      max_volume: '40'
                      group: false
                      source: icon
                      info: short
                      artwork: material
                      tap_action:
                        action: none
                      hide:
                        name: true
                        source: true
                        icon: false
                        info: false
                        power: true
                        progress: true
                        prev: true
                        next: true
                - type: custom:swipe-card
                  parameters:
                    preventInteractionOnTransition: true
                    effect: slide
                    spaceBetween: 10
                    slidesPerView: 4
                    scrollbar:
                      hide: true
                      draggable: true
                      snapOnRelease: true
                  cards:
                    - type: custom:button-card
                      entity: media_player.powernode_2i_ea48
                      show_entity_picture: true
                      show_label: false
                      show_name: false
                      size: 70%
                      aspect_ratio: 1/1
                      styles:
                        grid:
                          - position: relative
                        entity_picture:
                          - border-radius: 50%
                        custom_fields:
                          playing:
                            - background-color: >
                                [[[
                                  if
                                (states['media_player.powernode_2i_ea48'].attributes['source']
                                == "NPO Radio 1")
                                    return "var(--switch-checked-button-color)";
                                  return "red";
                                ]]]
                            - border-radius: 50%
                            - position: absolute
                            - left: 65%
                            - top: 10%
                            - height: 25px
                            - width: 25px
                            - line-height: 20px
                      custom_fields:
                        playing: >
                          [[[
                            if
                          (states['media_player.powernode_2i_ea48'].attributes['source']
                          == "NPO Radio 1")
                              return `<ha-icon
                                icon="mdi:music"
                                style="width: 16px; height: 16px; color:
                          var(--primary-background-color);">
                                </ha-icon>`
                          ]]]
                      entity_picture: /local/img/radio/radio1.png
                      tap_action:
                        action: call-service
                        service: media_player.select_source
                        target:
                          entity_id: media_player.powernode_2i_ea48
                        data:
                          source: NPO Radio 1
                    - type: custom:button-card
                      entity: media_player.powernode_2i_ea48
                      show_entity_picture: true
                      show_label: false
                      show_name: false
                      size: 70%
                      aspect_ratio: 1/1
                      styles:
                        grid:
                          - position: relative
                        entity_picture:
                          - border-radius: 50%
                        custom_fields:
                          playing:
                            - background-color: >
                                [[[
                                  if
                                (states['media_player.powernode_2i_ea48'].attributes['source']
                                == "NPO Radio 2")
                                    return "var(--switch-checked-button-color)";
                                  return "red";
                                ]]]
                            - border-radius: 50%
                            - position: absolute
                            - left: 65%
                            - top: 10%
                            - height: 25px
                            - width: 25px
                            - line-height: 20px
                      custom_fields:
                        playing: >
                          [[[
                            if
                          (states['media_player.powernode_2i_ea48'].attributes['source']
                          == "NPO Radio 2")
                              return `<ha-icon
                                icon="mdi:music"
                                style="width: 16px; height: 16px; color:
                          var(--primary-background-color);">
                                </ha-icon>`
                          ]]]
                      entity_picture: /local/img/radio/radio2.png
                      tap_action:
                        action: call-service
                        service: media_player.select_source
                        target:
                          entity_id: media_player.powernode_2i_ea48
                        data:
                          source: NPO Radio 2
                    - type: custom:button-card
                      entity: media_player.powernode_2i_ea48
                      show_entity_picture: true
                      show_label: false
                      show_name: false
                      size: 70%
                      aspect_ratio: 1/1
                      styles:
                        grid:
                          - position: relative
                        entity_picture:
                          - border-radius: 50%
                        custom_fields:
                          playing:
                            - background-color: >
                                [[[
                                  if
                                (states['media_player.powernode_2i_ea48'].attributes['source']
                                == "NPO 3FM")
                                    return "var(--switch-checked-button-color)";
                                  return "red";
                                ]]]
                            - border-radius: 50%
                            - position: absolute
                            - left: 65%
                            - top: 10%
                            - height: 25px
                            - width: 25px
                            - line-height: 20px
                      custom_fields:
                        playing: >
                          [[[
                            if
                          (states['media_player.powernode_2i_ea48'].attributes['source']
                          == "NPO 3FM")
                              return `<ha-icon
                                icon="mdi:music"
                                style="width: 16px; height: 16px; color:
                          var(--primary-background-color);">
                                </ha-icon>`
                          ]]]
                      entity_picture: /local/img/radio/3fm.png
                      tap_action:
                        action: call-service
                        service: media_player.select_source
                        target:
                          entity_id: media_player.powernode_2i_ea48
                        data:
                          source: NPO 3FM
                    - type: custom:button-card
                      entity: media_player.powernode_2i_ea48
                      show_entity_picture: true
                      show_label: false
                      show_name: false
                      size: 70%
                      aspect_ratio: 1/1
                      styles:
                        grid:
                          - position: relative
                        entity_picture:
                          - border-radius: 50%
                        custom_fields:
                          playing:
                            - background-color: >
                                [[[
                                    if
                                (states['media_player.powernode_2i_ea48'].attributes['source']
                                == "NPO Radio 4")
                                    return "var(--switch-checked-button-color)";
                                  return "red";
                                ]]]
                            - border-radius: 50%
                            - position: absolute
                            - left: 65%
                            - top: 10%
                            - height: 25px
                            - width: 25px
                            - line-height: 20px
                      custom_fields:
                        playing: >
                          [[[
                              if
                          (states['media_player.powernode_2i_ea48'].attributes['source']
                          == "NPO Radio 4")
                              return `<ha-icon
                                icon="mdi:music"
                                style="width: 16px; height: 16px; color:
                          var(--primary-background-color);">
                                </ha-icon>`
                          ]]]
                      entity_picture: /local/img/radio/radio4.png
                      tap_action:
                        action: call-service
                        service: media_player.select_source
                        target:
                          entity_id: media_player.powernode_2i_ea48
                        data:
                          source: NPO Radio 4
                    - type: custom:button-card
                      entity: media_player.powernode_2i_ea48
                      show_entity_picture: true
                      show_label: false
                      show_name: false
                      size: 70%
                      aspect_ratio: 1/1
                      styles:
                        grid:
                          - position: relative
                        entity_picture:
                          - border-radius: 50%
                        custom_fields:
                          playing:
                            - background-color: >
                                [[[
                                  if
                                (states['media_player.powernode_2i_ea48'].attributes['source']
                                == "Radio 538")
                                    return "var(--switch-checked-button-color)";
                                  return "red";
                                ]]]
                            - border-radius: 50%
                            - position: absolute
                            - left: 65%
                            - top: 10%
                            - height: 25px
                            - width: 25px
                            - line-height: 20px
                      custom_fields:
                        playing: >
                          [[[
                            if
                          (states['media_player.powernode_2i_ea48'].attributes['source']
                          == "Radio 538")
                              return `<ha-icon
                                icon="mdi:music"
                                style="width: 16px; height: 16px; color:
                          var(--primary-background-color);">
                                </ha-icon>`
                          ]]]
                      entity_picture: /local/img/radio/radio538.png
                      tap_action:
                        action: call-service
                        service: media_player.select_source
                        target:
                          entity_id: media_player.powernode_2i_ea48
                        data:
                          source: Radio 538
                    - type: custom:button-card
                      entity: media_player.powernode_2i_ea48
                      show_entity_picture: true
                      show_label: false
                      show_name: false
                      size: 70%
                      aspect_ratio: 1/1
                      styles:
                        grid:
                          - position: relative
                        entity_picture:
                          - border-radius: 50%
                        custom_fields:
                          playing:
                            - background-color: >
                                [[[
                                  if
                                (states['media_player.powernode_2i_ea48'].attributes['source']
                                == "Radio 10")
                                    return "var(--switch-checked-button-color)";
                                  return "red";
                                ]]]
                            - border-radius: 50%
                            - position: absolute
                            - left: 65%
                            - top: 10%
                            - height: 25px
                            - width: 25px
                            - line-height: 20px
                      custom_fields:
                        playing: >
                          [[[
                            if
                          (states['media_player.powernode_2i_ea48'].attributes['source']
                          == "Radio 10")
                              return `<ha-icon
                                icon="mdi:music"
                                style="width: 16px; height: 16px; color:
                          var(--primary-background-color);">
                                </ha-icon>`
                          ]]]
                      entity_picture: /local/img/radio/radio10.png
                      tap_action:
                        action: call-service
                        service: media_player.select_source
                        target:
                          entity_id: media_player.powernode_2i_ea48
                        data:
                          source: Radio 10
                    - type: custom:button-card
                      entity: media_player.powernode_2i_ea48
                      show_entity_picture: true
                      show_label: false
                      show_name: false
                      size: 70%
                      aspect_ratio: 1/1
                      styles:
                        grid:
                          - position: relative
                        entity_picture:
                          - border-radius: 50%
                        custom_fields:
                          playing:
                            - background-color: >
                                [[[
                                  if
                                (states['media_player.powernode_2i_ea48'].attributes['source']
                                == "Qmusic Nonstop")
                                    return "var(--switch-checked-button-color)";
                                  return "red";
                                ]]]
                            - border-radius: 50%
                            - position: absolute
                            - left: 65%
                            - top: 10%
                            - height: 25px
                            - width: 25px
                            - line-height: 20px
                      custom_fields:
                        playing: >
                          [[[
                            if
                          (states['media_player.powernode_2i_ea48'].attributes['source']
                          == "Qmusic Nonstop")
                              return `<ha-icon
                                icon="mdi:music"
                                style="width: 16px; height: 16px; color:
                          var(--primary-background-color);">
                                </ha-icon>`
                          ]]]
                      entity_picture: /local/img/radio/qmusic.png
                      tap_action:
                        action: call-service
                        service: media_player.select_source
                        target:
                          entity_id: media_player.powernode_2i_ea48
                        data:
                          source: Qmusic Nonstop
                    - type: custom:button-card
                      entity: media_player.powernode_2i_ea48
                      show_entity_picture: true
                      show_label: false
                      show_name: false
                      size: 70%
                      aspect_ratio: 1/1
                      styles:
                        grid:
                          - position: relative
                        entity_picture:
                          - border-radius: 50%
                        custom_fields:
                          playing:
                            - background-color: >
                                [[[
                                    if
                                (states['media_player.powernode_2i_ea48'].attributes['source']
                                == "BNR Nieuwsradio")
                                    return "var(--switch-checked-button-color)";
                                  return "red";
                                ]]]
                            - border-radius: 50%
                            - position: absolute
                            - left: 65%
                            - top: 10%
                            - height: 25px
                            - width: 25px
                            - line-height: 20px
                      custom_fields:
                        playing: >
                          [[[
                              if
                          (states['media_player.powernode_2i_ea48'].attributes['source']
                          == "BNR Nieuwsradio")
                              return `<ha-icon
                                icon="mdi:music"
                                style="width: 16px; height: 16px; color:
                          var(--primary-background-color);">
                                </ha-icon>`
                          ]]]
                      entity_picture: /local/img/radio/bnr.png
                      tap_action:
                        action: call-service
                        service: media_player.select_source
                        target:
                          entity_id: media_player.powernode_2i_ea48
                        data:
                          source: BNR Nieuwsradio
          - type: conditional
            conditions:
              - entity: input_select.entertainment_activity
                state: Spotify
            card:
              type: vertical-stack
              cards:
                - type: vertical-stack
                  cards:
                    - type: custom:mini-media-player
                      entity: media_player.powernode_2i_ea48
                      name: Bluesound Powernode 2i
                      icon: mdi:spotify
                      toggle_power: false
                      volume_stateless: false
                      max_volume: 40
                      group: false
                      source: icon
                      info: short
                      artwork: cover
                      tap_action:
                        action: none
                      hide:
                        name: true
                        source: true
                        icon: false
                        info: false
                        power: true
                        shuffle: false
                        repeat: false
                        runtime: false
                        runtime_remaining: false
                        volume_level: false
                        jump: true
                - type: custom:swipe-card
                  parameters:
                    pagination: null
                  cards:
                    - type: grid
                      square: true
                      columns: 4
                      cards:
                        - type: custom:button-card
                          entity: media_player.powernode_2i_ea48
                          show_entity_picture: true
                          entity_picture: /local/img/spotify/liked_songs.png
                          show_label: false
                          show_name: true
                          name: Liked Songs
                          size: 95%
                          styles:
                            grid:
                              - position: relative
                            label:
                              - font-size: 14px
                            name:
                              - color: grey
                              - font-size: 12px
                            entity_picture:
                              - border-radius: 0px
                          tap_action:
                            action: call-service
                            service: media_player.select_source
                            target:
                              entity_id: media_player.powernode_2i_ea48
                            data:
                              source: 'Spotify: Liked Songs'
                        - type: custom:button-card
                          entity: sensor.playlist_01
                          show_entity_picture: true
                          entity_picture: |
                            [[[ return entity.attributes.image; ]]]
                          show_label: true
                          show_name: true
                          name: |
                            [[[ return entity.attributes.name; ]]]
                          size: 95%
                          styles:
                            grid:
                              - position: relative
                            label:
                              - font-size: 14px
                            name:
                              - color: grey
                              - font-size: 12px
                            entity_picture:
                              - border-radius: 0px
                          tap_action:
                            action: call-service
                            service: media_player.play_media
                            data:
                              media_content_id: |
                                [[[ return entity.attributes.url; ]]]
                              media_content_type: |
                                [[[ return entity.attributes.type; ]]]
                              announce: true
                            target:
                              entity_id: media_player.spotify_coen_s_nl
                        - type: custom:button-card
                          entity: sensor.playlist_02
                          show_entity_picture: true
                          entity_picture: |
                            [[[ return entity.attributes.image; ]]]
                          show_label: true
                          show_name: true
                          name: |
                            [[[ return entity.attributes.name; ]]]
                          size: 95%
                          styles:
                            grid:
                              - position: relative
                            label:
                              - font-size: 14px
                            name:
                              - color: grey
                              - font-size: 12px
                            entity_picture:
                              - border-radius: 0px
                          tap_action:
                            action: call-service
                            service: media_player.play_media
                            data:
                              media_content_id: |
                                [[[ return entity.attributes.url; ]]]
                              media_content_type: |
                                [[[ return entity.attributes.type; ]]]
                              announce: true
                            target:
                              entity_id: media_player.spotify_coen_s_nl
                        - type: custom:button-card
                          entity: sensor.playlist_03
                          show_entity_picture: true
                          entity_picture: |
                            [[[ return entity.attributes.image; ]]]
                          show_label: true
                          show_name: true
                          name: |
                            [[[ return entity.attributes.name; ]]]
                          size: 95%
                          styles:
                            grid:
                              - position: relative
                            label:
                              - font-size: 14px
                            name:
                              - color: grey
                              - font-size: 12px
                            entity_picture:
                              - border-radius: 0px
                          tap_action:
                            action: call-service
                            service: media_player.play_media
                            data:
                              media_content_id: |
                                [[[ return entity.attributes.url; ]]]
                              media_content_type: |
                                [[[ return entity.attributes.type; ]]]
                              announce: true
                            target:
                              entity_id: media_player.spotify_coen_s_nl
                    - type: grid
                      square: true
                      columns: 4
                      cards:
                        - type: custom:button-card
                          entity: sensor.playlist_04
                          show_entity_picture: true
                          entity_picture: |
                            [[[ return entity.attributes.image; ]]]
                          show_label: true
                          show_name: true
                          name: |
                            [[[ return entity.attributes.name; ]]]
                          size: 95%
                          styles:
                            grid:
                              - position: relative
                            label:
                              - color: grey
                              - font-size: 14px
                            name:
                              - font-size: 12px
                            entity_picture:
                              - border-radius: 0px
                          tap_action:
                            action: call-service
                            service: media_player.play_media
                            data:
                              media_content_id: |
                                [[[ return entity.attributes.url; ]]]
                              media_content_type: |
                                [[[ return entity.attributes.type; ]]]
                              announce: true
                            target:
                              entity_id: media_player.spotify_coen_s_nl
                        - type: custom:button-card
                          entity: sensor.playlist_05
                          show_entity_picture: true
                          entity_picture: |
                            [[[ return entity.attributes.image; ]]]
                          show_label: true
                          show_name: true
                          name: |
                            [[[ return entity.attributes.name; ]]]
                          size: 95%
                          styles:
                            grid:
                              - position: relative
                            label:
                              - font-size: 14px
                            name:
                              - color: grey
                              - font-size: 12px
                            entity_picture:
                              - border-radius: 0px
                          tap_action:
                            action: call-service
                            service: media_player.play_media
                            data:
                              media_content_id: |
                                [[[ return entity.attributes.url; ]]]
                              media_content_type: |
                                [[[ return entity.attributes.type; ]]]
                              announce: true
                            target:
                              entity_id: media_player.spotify_coen_s_nl
                        - type: custom:button-card
                          entity: sensor.playlist_06
                          show_entity_picture: true
                          entity_picture: |
                            [[[ return entity.attributes.image; ]]]
                          show_label: true
                          show_name: true
                          name: |
                            [[[ return entity.attributes.name; ]]]
                          size: 95%
                          styles:
                            grid:
                              - position: relative
                            label:
                              - font-size: 14px
                            name:
                              - color: grey
                              - font-size: 12px
                            entity_picture:
                              - border-radius: 0px
                          tap_action:
                            action: call-service
                            service: media_player.play_media
                            data:
                              media_content_id: |
                                [[[ return entity.attributes.url; ]]]
                              media_content_type: |
                                [[[ return entity.attributes.type; ]]]
                              announce: true
                            target:
                              entity_id: media_player.spotify_coen_s_nl
                        - type: custom:button-card
                          entity: sensor.playlist_07
                          show_entity_picture: true
                          entity_picture: |
                            [[[ return entity.attributes.image; ]]]
                          show_label: true
                          show_name: true
                          name: |
                            [[[ return entity.attributes.name; ]]]
                          size: 95%
                          styles:
                            grid:
                              - position: relative
                            label:
                              - font-size: 14px
                            name:
                              - color: grey
                              - font-size: 12px
                            entity_picture:
                              - border-radius: 0px
                          tap_action:
                            action: call-service
                            service: media_player.play_media
                            data:
                              media_content_id: |
                                [[[ return entity.attributes.url; ]]]
                              media_content_type: |
                                [[[ return entity.attributes.type; ]]]
                              announce: true
                            target:
                              entity_id: media_player.spotify_coen_s_nl
          - type: conditional
            conditions:
              - entity: group.multimedia_devices
                state: 'on'
            card:
              type: custom:mushroom-chips-card
              alignment: start
              chips:
                - type: template
                  entity: binary_sensor.tvscreen_device
                  icon: mdi:television-ambient-light
                  content: ''
                  tap_action:
                    action: call-service
                    service: button.press
                    target:
                      entity_id: button.beeldscherm
                    data: {}
                  icon_color: |-
                    {% if is_state("binary_sensor.tvscreen_device", "on") %}
                      blue
                    {% else %}
                      black
                    {% endif %}
                  double_tap_action:
                    action: none
                  hold_action:
                    action: none
                - type: template
                  entity: binary_sensor.tv_device
                  icon: mdi:television
                  icon_color: |-
                    {% if is_state("binary_sensor.tv_device", "on") %}
                      blue
                    {% else %}
                      black
                    {% endif %}
                  picture: ''
                  content: ''
                  double_tap_action:
                    action: none
                  tap_action:
                    action: call-service
                    service: button.press
                    target:
                      entity_id: button.tv_device
                    data: {}
                  hold_action:
                    action: none
          - type: conditional
            conditions:
              - entity: input_select.entertainment_activity
                state: Uitschakelen
            card:
              type: custom:atomic-calendar-revive
              enableModeChange: true
              entities:
                - entity: calendar.lise
                  name: Lise
                - entity: calendar.nederlandse_feestdagen
                  name: Nederlandse Feestdagen
                - entity: calendar.verjaardagen
                  name: Verjaardagen
                - entity: calendar.coen_anne
                  name: Coen & Anne
                  blocklist: Vakantie (Coen|Anne)
                - entity: calendar.schoonmaak
                  name: Schoonmaak
              sortByStartTime: true
              showDate: false
              hideDuplicates: false
              showMultiDayEventParts: false
              hoursOnSameLine: true
              compactMode: false
              showMultiDay: true
              showRelativeTime: true
              hideFinishedEvents: true
              showDeclined: false
              firstDayOfWeek: 1
              maxDaysToShow: 2
              showCurrentEventLine: false
              showMonth: false
              showDescription: false
              showFullDayProgress: true
              showWeekDay: true
              showEventIcon: false
              showCalendarName: false
              showEventDate: true
              showTimeRemaining: false
              showAllDayHours: false
              showWeekNumber: false
              showLastCalendarWeek: false
              disableCalLink: false
              dimFinishedEvents: true
              refreshInterval: 300
              hoursFormat: HH:mm
              card_mod:
                style: |
                  :host {
                    font-size: 13px;
                  }
        view_layout:
          grid-area: left
  - title: lights
    path: lights
    type: custom:grid-layout
    layout:
      grid-template-columns: 33% auto 33%
      grid-template-rows: auto
      grid-template-areas: |
        "header header header"
        "left middle right"
    icon: mdi:lightbulb
    badges: []
    cards:
      - type: vertical-stack
        cards:
          - type: vertical-stack
            cards:
              - type: custom:mushroom-title-card
                title: ''
                subtitle: Souterrain
              - type: custom:mushroom-light-card
                entity: light.shellydimmer_basement_stairs
                name: Keldertrap
                icon: mdi:lightbulb-spot
                layout: horizontal
                fill_container: false
                show_brightness_control: true
                collapsible_controls: false
                show_color_control: false
                show_color_temp_control: false
                use_light_color: false
              - type: custom:mushroom-light-card
                entity: light.shellydimmer_laundry_room
                name: Wasruimte
                icon: mdi:lightbulb-spot
                layout: horizontal
                fill_container: false
                show_brightness_control: true
                collapsible_controls: false
                show_color_control: false
                show_color_temp_control: false
                use_light_color: false
              - type: custom:mushroom-light-card
                entity: light.shellydimmer_basement
                name: Kelder
                icon: mdi:lightbulb-spot
                layout: horizontal
                fill_container: false
                show_brightness_control: true
                collapsible_controls: false
                show_color_control: false
                show_color_temp_control: false
                use_light_color: false
        view_layout:
          grid-area: left
      - type: vertical-stack
        cards:
          - type: custom:mushroom-title-card
            title: ''
            subtitle: Begane grond
          - type: custom:mushroom-light-card
            entity: light.shellydimmer_living_room
            name: Woonkamer
            icon: mdi:lightbulb-multiple
            layout: horizontal
            fill_container: false
            show_brightness_control: true
            collapsible_controls: false
            show_color_control: false
            show_color_temp_control: false
            use_light_color: false
          - type: custom:mushroom-light-card
            entity: light.shellydimmer_dinner_table
            name: Eettafel
            icon: mdi:ceiling-light
            layout: horizontal
            fill_container: false
            show_brightness_control: true
            collapsible_controls: false
            show_color_control: false
            show_color_temp_control: false
            use_light_color: false
          - type: custom:mushroom-light-card
            entity: light.shellydimmer_kitchen
            name: Keuken
            icon: mdi:lightbulb-spot
            layout: horizontal
            fill_container: false
            show_brightness_control: true
            collapsible_controls: false
            show_color_control: false
            show_color_temp_control: false
            use_light_color: false
          - type: vertical-stack
            cards:
              - type: custom:mushroom-light-card
                entity: light.shellydimmer_backyard_string_l
                name: Achtertuin
                icon: mdi:string-lights
                layout: horizontal
                fill_container: false
                show_brightness_control: true
                collapsible_controls: false
                show_color_control: false
                show_color_temp_control: false
                use_light_color: false
              - type: custom:mushroom-light-card
                entity: light.shellydimmer_barn_hanging_lamp
                name: Schuur hanglamp
                icon: mdi:outdoor-lamp
                layout: horizontal
                fill_container: false
                show_brightness_control: true
                collapsible_controls: false
                show_color_control: false
                show_color_temp_control: false
                use_light_color: false
              - type: custom:mushroom-light-card
                entity: light.shelly1_barn_door
                name: Schuur
                icon: mdi:spotlight-beam
                layout: horizontal
                fill_container: false
                show_brightness_control: false
                collapsible_controls: false
                show_color_control: false
                show_color_temp_control: false
                use_light_color: false
              - type: custom:mushroom-light-card
                entity: light.shelly1_front_door
                name: Voordeur
                icon: mdi:coach-lamp
                layout: horizontal
                fill_container: false
                show_brightness_control: false
                collapsible_controls: false
                show_color_control: false
                show_color_temp_control: false
                use_light_color: false
        view_layout:
          grid-area: middle
      - type: vertical-stack
        cards:
          - type: vertical-stack
            cards:
              - type: custom:mushroom-title-card
                title: ''
                subtitle: Eerste verdieping
              - type: custom:mushroom-light-card
                entity: light.shellydimmer_master_bedroom
                name: Slaapkamer
                icon: mdi:ceiling-light
                layout: horizontal
                fill_container: false
                show_brightness_control: true
                collapsible_controls: false
                show_color_control: false
                show_color_temp_control: false
                use_light_color: false
              - type: custom:mushroom-light-card
                entity: light.shellydimmer_lises_room
                name: Lise's slaapkamer
                icon: mdi:ceiling-light
                layout: horizontal
                fill_container: false
                show_brightness_control: true
                collapsible_controls: false
                show_color_control: false
                show_color_temp_control: false
                use_light_color: false
              - type: custom:mushroom-light-card
                entity: light.shellydimmer_small_bedroom
                name: Kleine slaapkamer
                icon: mdi:ceiling-light
                layout: horizontal
                fill_container: false
                show_brightness_control: true
                collapsible_controls: false
                show_color_control: false
                show_color_temp_control: false
                use_light_color: false
              - type: custom:mushroom-light-card
                entity: light.shelly1_upstairs_hall
                name: Overloop
                icon: mdi:ceiling-light
                layout: horizontal
                fill_container: false
                show_brightness_control: false
                collapsible_controls: false
                show_color_control: false
                show_color_temp_control: false
                use_light_color: false
              - type: custom:mushroom-light-card
                entity: light.shelly1_bathroom
                name: Badkamer
                icon: mdi:lightbulb-spot
                layout: horizontal
                fill_container: false
                show_brightness_control: false
                collapsible_controls: false
                show_color_control: false
                show_color_temp_control: false
                use_light_color: false
          - type: custom:mushroom-light-card
            entity: light.cv_closet
            name: CV Kast
            icon: mdi:lightbulb-spot
            layout: horizontal
            fill_container: false
            show_brightness_control: false
            collapsible_controls: false
            show_color_control: false
            show_color_temp_control: false
            use_light_color: false
        view_layout:
          grid-area: right
      - type: custom:mushroom-chips-card
        chips:
          - type: action
            double_tap_action:
              action: none
            tap_action:
              action: navigate
              navigation_path: /wall-v2/0
            hold_action:
              action: none
            icon: mdi:arrow-left
        alignment: start
        view_layout:
          grid-area: header
  - title: climate
    path: climate
    type: custom:grid-layout
    layout:
      grid-template-columns: 33% auto 33%
      grid-template-rows: auto
      grid-template-areas: |
        "header header header"
        "left-up mid-up right-up"
        "left-down mid-down right-down"
    icon: mdi:home-thermometer
    badges: []
    cards:
      - type: vertical-stack
        cards:
          - type: custom:mushroom-climate-card
            entity: climate.living_room
            name: Woonkamer
            icon: mdi:thermometer
            layout: horizontal
            hvac_modes:
              - auto
              - 'off'
            show_temperature_control: true
            collapsible_controls: true
            primary_info: name
            secondary_info: none
            icon_type: icon
          - type: custom:mushroom-chips-card
            chips:
              - type: template
                icon: |-
                  {% set t = states('sensor.living_room_temperature') %}
                  {% if t < '18' %} mdi:thermometer-high
                  {% elif t > '18' and t < '24' %} mdi:thermometer 
                  {% else %}  mdi:thermometer-high
                  {% endif %}
                icon_color: |-
                  {% set t = states(entity) %}
                  {% if t < '17' %} #beeae9
                  {% elif t > '17' and t < '18' %} #Ffe1b4
                  {% elif t > '18' and t < '20' %} #Ecb45f
                  {% elif t > '20' and t < '22' %} #Ec955f
                  {% elif t > '22' and t < '23' %} #Ec875f
                  {% elif t > '23' and t < '24' %} #Ec735f
                  {% elif t > '24' and t < '25' %} #F15239
                  {% else %}  #Ea2e2e
                  {% endif %}
                double_tap_action:
                  action: none
                entity: sensor.living_room_temperature
                content: >-
                  {{ states(entity) }} {{ state_attr(entity,
                  'unit_of_measurement') }}
                tap_action:
                  action: none
                hold_action:
                  action: none
              - type: entity
                entity: sensor.living_room_humidity
                icon_color: cyan
              - type: entity
                entity: sensor.living_room_thermal_comfort_absolute_humidity
                icon_color: cyan
              - type: entity
                entity: sensor.living_room_thermal_comfort_dew_point
                icon_color: teal
              - type: conditional
                conditions:
                  - entity: sensor.living_room_heating
                    state_not: '0.0'
                chip:
                  type: entity
                  entity: sensor.living_room_heating
                  name: Heatingpower
                  icon: mdi:heating-coil
                  icon_color: deep-orange
          - type: custom:mushroom-chips-card
            chips:
              - type: entity
                entity: sensor.basement_thermal_comfort_humidex_perception
              - type: conditional
                conditions:
                  - entity: sensor.living_room_heating
                    state_not: '0.0'
                chip:
                  type: entity
                  entity: sensor.living_room_heating
                  name: Heatingpower
                  icon: mdi:heating-coil
                  icon_color: deep-orange
          - type: horizontal-stack
            cards:
              - type: horizontal-stack
                cards:
                  - type: custom:mini-graph-card
                    name: Temperatuur
                    hours_to_show: 12
                    hour24: true
                    points_per_hour: 3
                    font_size: 90
                    font_size_header: 10
                    animate: true
                    height: 190
                    line_width: 2
                    show:
                      name: true
                      extrema: true
                      state: false
                      icon: false
                    entities:
                      - entity: sensor.living_room_temperature
                    color_thresholds:
                      - value: 17
                        color: '#beeae9'
                      - color: '#Ffe1b4'
                      - color: '#Ecb45f'
                      - color: '#Ec955f'
                      - color: '#Ec875f'
                      - color: '#Ec735f'
                      - color: '#F15239'
                      - value: 25
                        color: '#Ea2e2e'
                  - type: custom:mini-graph-card
                    name: Luchtvochtigheid
                    hours_to_show: 12
                    hour24: true
                    points_per_hour: 3
                    font_size: 90
                    font_size_header: 10
                    animate: true
                    height: 190
                    line_width: 2
                    show:
                      name: true
                      extrema: true
                      state: false
                      icon: false
                    entities:
                      - entity: sensor.living_room_humidity
                    line_color: cyan
        view_layout:
          grid-area: mid-up
      - type: custom:mushroom-chips-card
        chips:
          - type: action
            double_tap_action:
              action: none
            tap_action:
              action: navigate
              navigation_path: /wall-v2/0
            hold_action:
              action: none
            icon: mdi:arrow-left
        alignment: start
        view_layout:
          grid-area: header
      - type: vertical-stack
        cards:
          - type: custom:mushroom-climate-card
            entity: climate.basement
            name: Souterrain
            icon: mdi:thermometer
            layout: horizontal
            hvac_modes:
              - auto
              - 'off'
            show_temperature_control: true
            collapsible_controls: true
            primary_info: name
            secondary_info: none
            icon_type: icon
          - type: custom:mushroom-chips-card
            chips:
              - type: template
                icon: |-
                  {% set t = states('sensor.basement_temperature') %}
                  {% if t < '18' %} mdi:thermometer-high
                  {% elif t > '18' and t < '24' %} mdi:thermometer 
                  {% else %}  mdi:thermometer-high
                  {% endif %}
                icon_color: |-
                  {% set t = states(entity) %}
                  {% if t < '17' %} #beeae9
                  {% elif t > '17' and t < '18' %} #Ffe1b4
                  {% elif t > '18' and t < '20' %} #Ecb45f
                  {% elif t > '20' and t < '22' %} #Ec955f
                  {% elif t > '22' and t < '23' %} #Ec875f
                  {% elif t > '23' and t < '24' %} #Ec735f
                  {% elif t > '24' and t < '25' %} #F15239
                  {% else %}  #Ea2e2e
                  {% endif %}
                double_tap_action:
                  action: none
                entity: sensor.basement_temperature
                content: >-
                  {{ states(entity) }} {{ state_attr(entity,
                  'unit_of_measurement') }}
                tap_action:
                  action: none
                hold_action:
                  action: none
              - type: entity
                entity: sensor.basement_humidity
                icon_color: cyan
              - type: entity
                entity: sensor.basement_thermal_comfort_absolute_humidity
                icon_color: cyan
              - type: entity
                entity: sensor.basement_thermal_comfort_dew_point
                icon_color: teal
              - type: conditional
                conditions:
                  - entity: sensor.basement_heating
                    state_not: '0.0'
                chip:
                  type: entity
                  entity: sensor.basement_heating
                  name: Heatingpower
                  icon: mdi:heating-coil
                  icon_color: deep-orange
          - type: custom:mushroom-chips-card
            chips:
              - type: entity
                entity: sensor.basement_thermal_comfort_dew_point_perception
              - type: conditional
                conditions:
                  - entity: sensor.basement_heating
                    state_not: '0.0'
                chip:
                  type: entity
                  entity: sensor.basement_heating
                  name: Heatingpower
                  icon: mdi:heating-coil
                  icon_color: deep-orange
              - type: template
                content: >-
                  {% if
                  is_state('input_boolean.mechanical_ventilation_position_1',
                  'on') %}
                    1
                  {% elif
                  is_state('input_boolean.mechanical_ventilation_position_2',
                  'on') %}
                    2
                  {% elif
                  is_state('input_boolean.mechanical_ventilation_position_3',
                  'on') %}
                    3
                  {% else %}
                    Uit
                  {% endif %}
                icon_color: >-
                  {% if
                  is_state('input_boolean.mechanical_ventilation_position_1',
                  'on') %}

                  yellow

                  {% elif
                  is_state('input_boolean.mechanical_ventilation_position_2',
                  'on') %}

                  orange

                  {% elif
                  is_state('input_boolean.mechanical_ventilation_position_3',
                  'on') %}

                  deep-orange

                  {% else %}

                  disabled

                  {% endif %}
                icon: >-
                  {% if
                  is_state('input_boolean.mechanical_ventilation_position_1',
                  'on') %}

                  mdi:fan-speed-1

                  {% elif
                  is_state('input_boolean.mechanical_ventilation_position_2',
                  'on') %}

                  mdi:fan-speed-2

                  {% elif
                  is_state('input_boolean.mechanical_ventilation_position_3',
                  'on') %}

                  mdi:fan-speed-3

                  {% else %}

                  mdi:fan-off

                  {% endif %}
              - type: template
                content: >-
                  {% set w = states('basement_wall_temperature_offset') %}

                  {% set d = states('sensor.basement_thermal_comfort_dew_point')
                  %}

                  {% if w < d %}Condensatie

                  {% else %}Geen condensatie

                  {% endif %}
                icon_color: >-
                  {% set w = states('basement_wall_temperature_offset') %}

                  {% set d = states('sensor.basement_thermal_comfort_dew_point')
                  %}

                  {% if w < d %}red

                  {% else %}green

                  {% endif %}
                icon: >-
                  {% set w = states('basement_wall_temperature_offset') %}

                  {% set d = states('sensor.basement_thermal_comfort_dew_point')
                  %}

                  {% if w < d %}mdi:alert

                  {% else %}mdi:check-circle

                  {% endif %}
          - type: horizontal-stack
            cards:
              - type: horizontal-stack
                cards:
                  - type: custom:mini-graph-card
                    name: Temperatuur
                    hours_to_show: 12
                    hour24: true
                    points_per_hour: 3
                    font_size: 90
                    font_size_header: 10
                    animate: true
                    height: 190
                    line_width: 2
                    show:
                      name: true
                      extrema: true
                      state: false
                      icon: false
                    entities:
                      - entity: sensor.basement_temperature
                    color_thresholds:
                      - value: 17
                        color: '#beeae9'
                      - color: '#Ffe1b4'
                      - color: '#Ecb45f'
                      - color: '#Ec955f'
                      - color: '#Ec875f'
                      - color: '#Ec735f'
                      - color: '#F15239'
                      - value: 25
                        color: '#Ea2e2e'
                  - type: custom:mini-graph-card
                    name: Luchtvochtigheid
                    hours_to_show: 12
                    hour24: true
                    points_per_hour: 3
                    font_size: 90
                    font_size_header: 10
                    animate: true
                    height: 190
                    line_width: 2
                    show:
                      name: true
                      extrema: true
                      state: false
                      icon: false
                    entities:
                      - entity: sensor.basement_humidity
                    line_color: cyan
        view_layout:
          grid-area: right-up
      - type: vertical-stack
        cards:
          - type: custom:mushroom-climate-card
            entity: climate.lises_room
            name: Lise's kamer
            icon: mdi:thermometer
            layout: horizontal
            hvac_modes:
              - auto
              - 'off'
            show_temperature_control: true
            collapsible_controls: true
            primary_info: name
            secondary_info: none
            icon_type: icon
          - type: custom:mushroom-chips-card
            chips:
              - type: template
                icon: |-
                  {% set t = states('sensor.lises_room_temperature') %}
                  {% if t < '18' %} mdi:thermometer-high
                  {% elif t > '18' and t < '24' %} mdi:thermometer 
                  {% else %}  mdi:thermometer-high
                  {% endif %}
                icon_color: |-
                  {% set t = states(entity) %}
                  {% if t < '17' %} #beeae9
                  {% elif t > '17' and t < '18' %} #Ffe1b4
                  {% elif t > '18' and t < '20' %} #Ecb45f
                  {% elif t > '20' and t < '22' %} #Ec955f
                  {% elif t > '22' and t < '23' %} #Ec875f
                  {% elif t > '23' and t < '24' %} #Ec735f
                  {% elif t > '24' and t < '25' %} #F15239
                  {% else %}  #Ea2e2e
                  {% endif %}
                double_tap_action:
                  action: none
                entity: sensor.lises_room_temperature
                content: >-
                  {{ states(entity) }} {{ state_attr(entity,
                  'unit_of_measurement') }}
                tap_action:
                  action: none
                hold_action:
                  action: none
              - type: entity
                entity: sensor.lises_room_humidity
                icon_color: cyan
              - type: entity
                entity: sensor.lises_room_thermal_comfort_absolute_humidity
                icon_color: cyan
              - type: entity
                entity: sensor.lises_room_thermal_comfort_dew_point
                icon_color: teal
              - type: conditional
                conditions:
                  - entity: sensor.lises_room_heating
                    state_not: '0.0'
                chip:
                  type: entity
                  entity: sensor.lises_room_heating
                  name: Heatingpower
                  icon: mdi:heating-coil
                  icon_color: deep-orange
          - type: custom:mushroom-chips-card
            chips:
              - type: entity
                entity: sensor.lises_room_thermal_comfort_humidex_perception
              - type: conditional
                conditions:
                  - entity: sensor.lises_room_heating
                    state_not: '0.0'
                chip:
                  type: entity
                  entity: sensor.lises_room_heating
                  name: Heatingpower
                  icon: mdi:heating-coil
                  icon_color: deep-orange
          - type: horizontal-stack
            cards:
              - type: horizontal-stack
                cards:
                  - type: custom:mini-graph-card
                    name: Temperatuur
                    hours_to_show: 12
                    hour24: true
                    points_per_hour: 3
                    font_size: 90
                    font_size_header: 10
                    animate: true
                    height: 190
                    line_width: 2
                    show:
                      name: true
                      extrema: true
                      state: false
                      icon: false
                    entities:
                      - entity: sensor.lises_room_temperature
                    color_thresholds:
                      - value: 17
                        color: '#beeae9'
                      - color: '#Ffe1b4'
                      - color: '#Ecb45f'
                      - color: '#Ec955f'
                      - color: '#Ec875f'
                      - color: '#Ec735f'
                      - color: '#F15239'
                      - value: 25
                        color: '#Ea2e2e'
                  - type: custom:mini-graph-card
                    name: Luchtvochtigheid
                    hours_to_show: 12
                    hour24: true
                    points_per_hour: 3
                    font_size: 90
                    font_size_header: 10
                    animate: true
                    height: 190
                    line_width: 2
                    show:
                      name: true
                      extrema: true
                      state: false
                      icon: false
                    entities:
                      - entity: sensor.lises_room_humidity
                    line_color: cyan
        view_layout:
          grid-area: left-down
      - type: vertical-stack
        cards:
          - type: custom:mushroom-climate-card
            entity: climate.master_bedroom
            name: Slaapkamer
            icon: mdi:thermometer
            layout: horizontal
            hvac_modes:
              - auto
              - 'off'
            show_temperature_control: true
            collapsible_controls: true
            primary_info: name
            secondary_info: none
            icon_type: icon
          - type: custom:mushroom-chips-card
            chips:
              - type: template
                icon: |-
                  {% set t = states('sensor.master_bedroom_temperature') %}
                  {% if t < '18' %} mdi:thermometer-high
                  {% elif t > '18' and t < '24' %} mdi:thermometer 
                  {% else %}  mdi:thermometer-high
                  {% endif %}
                icon_color: |-
                  {% set t = states(entity) %}
                  {% if t < '17' %} #beeae9
                  {% elif t > '17' and t < '18' %} #Ffe1b4
                  {% elif t > '18' and t < '20' %} #Ecb45f
                  {% elif t > '20' and t < '22' %} #Ec955f
                  {% elif t > '22' and t < '23' %} #Ec875f
                  {% elif t > '23' and t < '24' %} #Ec735f
                  {% elif t > '24' and t < '25' %} #F15239
                  {% else %}  #Ea2e2e
                  {% endif %}
                double_tap_action:
                  action: none
                entity: sensor.master_bedroom_temperature
                content: >-
                  {{ states(entity) }} {{ state_attr(entity,
                  'unit_of_measurement') }}
                tap_action:
                  action: none
                hold_action:
                  action: none
              - type: entity
                entity: sensor.master_bedroom_humidity
                icon_color: cyan
              - type: entity
                entity: sensor.master_bedroom_thermal_comfort_absolute_humidity
                icon_color: cyan
              - type: entity
                entity: sensor.master_bedroom_thermal_comfort_dew_point
                icon_color: teal
              - type: conditional
                conditions:
                  - entity: sensor.master_bedroom_heating
                    state_not: '0.0'
                chip:
                  type: entity
                  entity: sensor.master_bedroom_heating
                  name: Heatingpower
                  icon: mdi:heating-coil
                  icon_color: deep-orange
          - type: custom:mushroom-chips-card
            chips:
              - type: entity
                entity: sensor.master_bedroom_thermal_comfort_humidex_perception
              - type: conditional
                conditions:
                  - entity: sensor.master_bedroom_heating
                    state_not: '0.0'
                chip:
                  type: entity
                  entity: sensor.master_bedroom_heating
                  name: Heatingpower
                  icon: mdi:heating-coil
                  icon_color: deep-orange
          - type: horizontal-stack
            cards:
              - type: horizontal-stack
                cards:
                  - type: custom:mini-graph-card
                    name: Temperatuur
                    hours_to_show: 12
                    hour24: true
                    points_per_hour: 3
                    font_size: 90
                    font_size_header: 10
                    animate: true
                    height: 190
                    line_width: 2
                    show:
                      name: true
                      extrema: true
                      state: false
                      icon: false
                    entities:
                      - entity: sensor.master_bedroom_temperature
                    color_thresholds:
                      - value: 17
                        color: '#beeae9'
                      - color: '#Ffe1b4'
                      - color: '#Ecb45f'
                      - color: '#Ec955f'
                      - color: '#Ec875f'
                      - color: '#Ec735f'
                      - color: '#F15239'
                      - value: 25
                        color: '#Ea2e2e'
                  - type: custom:mini-graph-card
                    name: Luchtvochtigheid
                    hours_to_show: 12
                    hour24: true
                    points_per_hour: 3
                    font_size: 90
                    font_size_header: 10
                    animate: true
                    height: 190
                    line_width: 2
                    show:
                      name: true
                      extrema: true
                      state: false
                      icon: false
                    entities:
                      - entity: sensor.master_bedroom_humidity
                    line_color: cyan
        view_layout:
          grid-area: mid-down
      - type: vertical-stack
        cards:
          - type: custom:mushroom-climate-card
            entity: climate.small_bedroom
            name: Kleine kamer
            icon: mdi:thermometer
            layout: horizontal
            hvac_modes:
              - auto
              - 'off'
            show_temperature_control: true
            collapsible_controls: true
            primary_info: name
            secondary_info: none
            icon_type: icon
          - type: custom:mushroom-chips-card
            chips:
              - type: template
                icon: |-
                  {% set t = states('sensor.small_bedroom_temperature') %}
                  {% if t < '18' %} mdi:thermometer-high
                  {% elif t > '18' and t < '24' %} mdi:thermometer 
                  {% else %}  mdi:thermometer-high
                  {% endif %}
                icon_color: |-
                  {% set t = states(entity) %}
                  {% if t < '17' %} #beeae9
                  {% elif t > '17' and t < '18' %} #Ffe1b4
                  {% elif t > '18' and t < '20' %} #Ecb45f
                  {% elif t > '20' and t < '22' %} #Ec955f
                  {% elif t > '22' and t < '23' %} #Ec875f
                  {% elif t > '23' and t < '24' %} #Ec735f
                  {% elif t > '24' and t < '25' %} #F15239
                  {% else %}  #Ea2e2e
                  {% endif %}
                double_tap_action:
                  action: none
                entity: sensor.small_bedroom_temperature
                content: >-
                  {{ states(entity) }} {{ state_attr(entity,
                  'unit_of_measurement') }}
                tap_action:
                  action: none
                hold_action:
                  action: none
              - type: entity
                entity: sensor.small_bedroom_humidity
                icon_color: cyan
              - type: entity
                entity: sensor.small_bedroom_thermal_comfort_absolute_humidity
                icon_color: cyan
              - type: entity
                entity: sensor.small_bedroom_thermal_comfort_dew_point
                icon_color: teal
              - type: conditional
                conditions:
                  - entity: sensor.small_bedroom_heating
                    state_not: '0.0'
                chip:
                  type: entity
                  entity: sensor.small_bedroom_heating
                  name: Heatingpower
                  icon: mdi:heating-coil
                  icon_color: deep-orange
          - type: custom:mushroom-chips-card
            chips:
              - type: entity
                entity: sensor.small_bedroom_thermal_comfort_humidex_perception
              - type: conditional
                conditions:
                  - entity: sensor.small_bedroom_heating
                    state_not: '0.0'
                chip:
                  type: entity
                  entity: sensor.small_bedroom_heating
                  name: Heatingpower
                  icon: mdi:heating-coil
                  icon_color: deep-orange
          - type: horizontal-stack
            cards:
              - type: horizontal-stack
                cards:
                  - type: custom:mini-graph-card
                    name: Temperatuur
                    hours_to_show: 12
                    hour24: true
                    points_per_hour: 3
                    font_size: 90
                    font_size_header: 10
                    animate: true
                    height: 190
                    line_width: 2
                    show:
                      name: true
                      extrema: true
                      state: false
                      icon: false
                    entities:
                      - entity: sensor.small_bedroom_temperature
                    color_thresholds:
                      - value: 17
                        color: '#beeae9'
                      - color: '#Ffe1b4'
                      - color: '#Ecb45f'
                      - color: '#Ec955f'
                      - color: '#Ec875f'
                      - color: '#Ec735f'
                      - color: '#F15239'
                      - value: 25
                        color: '#Ea2e2e'
                  - type: custom:mini-graph-card
                    name: Luchtvochtigheid
                    hours_to_show: 12
                    hour24: true
                    points_per_hour: 3
                    font_size: 90
                    font_size_header: 10
                    animate: true
                    height: 190
                    line_width: 2
                    show:
                      name: true
                      extrema: true
                      state: false
                      icon: false
                    entities:
                      - entity: sensor.small_bedroom_humidity
                    line_color: cyan
        view_layout:
          grid-area: right-down
      - type: vertical-stack
        cards:
          - type: markdown
            content: Buiten
            style:
              .: |
                ha-card { 
                  height: 100%;
                  font-size: 1.0em;
                  padding: 0 !important;
                  line-height: 2.5;
                  text-align: left;
                }
          - type: custom:mushroom-chips-card
            chips:
              - type: weather
                entity: weather.buienradar
                show_conditions: true
                show_temperature: true
              - type: entity
                entity: sensor.buienradar_humidity
                icon_color: cyan
              - type: entity
                entity: sensor.outdoor_thermal_comfort_absolute_humidity
                icon_color: cyan
              - type: entity
                entity: sensor.outdoor_thermal_comfort_dew_point
                icon_color: teal
          - type: custom:mushroom-chips-card
            chips:
              - type: entity
                entity: sensor.outdoor_thermal_comfort_dew_point_perception
          - type: horizontal-stack
            cards:
              - type: horizontal-stack
                cards:
                  - type: custom:mini-graph-card
                    name: Temperatuur
                    hours_to_show: 12
                    hour24: true
                    points_per_hour: 3
                    font_size: 90
                    font_size_header: 10
                    animate: true
                    height: 190
                    line_width: 2
                    show:
                      name: true
                      extrema: true
                      state: false
                      icon: false
                    entities:
                      - entity: sensor.buienradar_temperature
                    color_thresholds:
                      - value: 17
                        color: '#beeae9'
                      - color: '#Ffe1b4'
                      - color: '#Ecb45f'
                      - color: '#Ec955f'
                      - color: '#Ec875f'
                      - color: '#Ec735f'
                      - color: '#F15239'
                      - value: 25
                        color: '#Ea2e2e'
                  - type: custom:mini-graph-card
                    name: Luchtvochtigheid
                    hours_to_show: 12
                    hour24: true
                    points_per_hour: 3
                    font_size: 90
                    font_size_header: 10
                    animate: true
                    height: 190
                    line_width: 2
                    show:
                      name: true
                      extrema: true
                      state: false
                      icon: false
                    entities:
                      - entity: sensor.buienradar_humidity
                    line_color: cyan
        view_layout:
          grid-area: left-up
  - title: vacuum
    path: vacuum
    icon: mdi:vacuum
    layout:
      grid-template-columns: 30% auto 30%
      grid-template-rows: auto
      grid-template-areas: |
        "header header header"
        ". message ."
        "left middle right"
        "footer footer footer"
    type: custom:grid-layout
    badges: []
    cards:
      - type: custom:mushroom-chips-card
        chips:
          - type: action
            double_tap_action:
              action: none
            tap_action:
              action: navigate
              navigation_path: /wall-v2/0
            hold_action:
              action: none
            icon: mdi:arrow-left
        alignment: start
        view_layout:
          grid-area: header
      - type: custom:xiaomi-vacuum-map-card
        map_source:
          camera: camera.roborock_s6_pure_map
          crop:
            top: 139
            bottom: 135
        calibration_source:
          camera: true
        entity: vacuum.roborock_s6_pure
        vacuum_platform: humbertogontijo/homeassistant-roborock
        map_modes:
          - template: vacuum_clean_zone
          - template: vacuum_goto
          - template: vacuum_goto_predefined
            predefined_selections:
              - position:
                  - 29235
                  - 26134
                label:
                  text: Prullenbak
                  x: 29235
                  'y': 26134
                  offset_y: 35
                icon:
                  name: mdi:trash-can
                  x: 29235
                  'y': 26134
          - template: vacuum_clean_segment
            predefined_selections:
              - id: '16'
                icon:
                  name: mdi:broom
                  x: 30675
                  'y': 33275
                label:
                  text: Hal
                  x: 30675
                  'y': 33275
                  offset_y: 35
                outline:
                  - - 28000
                    - 29400
                  - - 33350
                    - 29400
                  - - 33350
                    - 37150
                  - - 28000
                    - 37150
              - id: '17'
                icon:
                  name: mdi:broom
                  x: 26725
                  'y': 31400
                label:
                  text: Woonkamer
                  x: 26725
                  'y': 31400
                  offset_y: 35
                outline:
                  - - 24700
                    - 29200
                  - - 28750
                    - 29200
                  - - 28750
                    - 33600
                  - - 24700
                    - 33600
              - id: '18'
                icon:
                  name: mdi:broom
                  x: 26775
                  'y': 25250
                label:
                  text: Eetkamer
                  x: 26775
                  'y': 25250
                  offset_y: 35
                outline:
                  - - 24750
                    - 21150
                  - - 28800
                    - 21150
                  - - 28800
                    - 29350
                  - - 24750
                    - 29350
              - id: '19'
                icon:
                  name: mdi:broom
                  x: 29725
                  'y': 27500
                label:
                  text: Keuken
                  x: 29725
                  'y': 27500
                  offset_y: 35
                outline:
                  - - 28650
                    - 25650
                  - - 30800
                    - 25650
                  - - 30800
                    - 29350
                  - - 28650
                    - 29350
        two_finger_pan: true
        view_layout:
          grid-area: middle
  - title: SYSTEM
    path: system
    layout:
      grid-template-columns: 30% auto 30%
      grid-template-rows: auto
      grid-template-areas: |
        "header header header"
        "left middle right"
        "footer footer footer"
    type: custom:grid-layout
    icon: mdi:cog
    badges: []
    cards:
      - type: custom:mushroom-chips-card
        chips:
          - type: action
            double_tap_action:
              action: none
            tap_action:
              action: navigate
              navigation_path: /wall-v2/0
            hold_action:
              action: none
            icon: mdi:arrow-left
        alignment: start
        view_layout:
          grid-area: header
      - type: vertical-stack
        cards:
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-entity-card
                entity: switch.pfsense_filter_rule_1672839601_pass_any_allow_internet
                name: Internet NOT VLAN
                tap_action:
                  action: toggle
                double_tap_action:
                  action: none
                layout: vertical
                icon: ''
                hold_action:
                  action: none
              - type: custom:mushroom-template-card
                entity: image.wifi_guest_qrcode
                primary: Gast WiFi QR-Code
                secondary: WIFI-GUEST
                icon: mdi:wifi
                icon_color: '#12a895'
                layout: vertical
                tap_action:
                  action: call-service
                  service: browser_mod.popup
                  target:
                    device_id: 36e55e0e676980250ca196b341fc8e2e
                  data:
                    dismissable: true
                    size: normal
                    content:
                      type: picture-entity
                      entity: image.wifi_guest_qrcode
                      show_name: false
                      show_state: false
                      tap_action:
                        action: none
                    autoclose: true
                hold_action:
                  action: none
                double_tap_action:
                  action: none
          - type: custom:transmission-card
            header_text: Downloads
            hide_turtle: true
        view_layout:
          grid-area: right
      - type: vertical-stack
        cards:
          - type: horizontal-stack
            cards:
              - type: custom:mini-graph-card
                name: Internet speedtest
                hours_to_show: 110
                hour24: true
                animate: true
                line_width: 2
                font_size: 90
                font_size_header: 12
                tap_action:
                  action: call-service
                  entity: sensor.speedtest_download
                  service: homeassistant.update_entity
                  service_data:
                    entity_id: sensor.speedtest_download
                entities:
                  - entity: sensor.speedtest_download
                    name: Download
                    show_state: true
                    color: '#86deb1'
                  - entity: sensor.speedtest_upload
                    name: Upload
                    show_state: true
                    color: '#065e30'
          - type: horizontal-stack
            cards:
              - type: horizontal-stack
                cards:
                  - type: custom:mini-graph-card
                    name: Hypervisor A
                    hours_to_show: 8
                    hour24: true
                    points_per_hour: 10
                    font_size: 90
                    font_size_header: 12
                    animate: true
                    line_width: 2
                    show:
                      extrema: true
                    entities:
                      - entity: sensor.shellyplug_hypervisor_b_power
                    line_color: '#873e23'
                  - type: custom:mini-graph-card
                    name: Hypervisor B
                    hours_to_show: 8
                    hour24: true
                    points_per_hour: 10
                    font_size: 90
                    font_size_header: 12
                    animate: true
                    line_width: 2
                    line_color: '#ecb36e'
                    show:
                      extrema: true
                    entities:
                      - entity: sensor.shellyplug_hypervisor_a_power
                  - type: custom:mini-graph-card
                    name: Storage server
                    hours_to_show: 8
                    hour24: true
                    points_per_hour: 10
                    font_size: 90
                    font_size_header: 12
                    animate: true
                    line_width: 2
                    show:
                      extrema: true
                    entities:
                      - entity: sensor.shellyplug_storage_server_power
                    line_color: '#dd6a35'
        view_layout:
          grid-area: middle
      - type: vertical-stack
        cards:
          - type: horizontal-stack
            cards:
              - type: gauge
                entity: sensor.pfsense_cpu_usage
                name: Firewall CPU
                needle: true
                severity:
                  green: 0
                  yellow: 80
                  red: 95
              - type: gauge
                entity: sensor.pfsense_memory_used_percentage
                name: Firewall RAM
                needle: true
                severity:
                  green: 0
                  yellow: 80
                  red: 95
